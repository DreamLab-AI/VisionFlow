<!DOCTYPE html>
<html>
<head>
    <title>Wardley Map</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .map-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            display: inline-block;
        }
        h1 {
            color: #333;
            margin-top: 0;
        }
        .component {
            cursor: pointer;
        }
        .component:hover circle {
            r: 10;
            transition: r 0.2s;
        }
        .controls {
            margin-top: 20px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 5px;
        }
        button {
            padding: 8px 15px;
            margin-right: 10px;
            background: #4a90e2;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: #357abd;
        }
    </style>
</head>
<body>
    <div class="map-container">
        <h1>Wardley Map</h1>
        <svg width="800" height="600" 
                      xmlns="http://www.w3.org/2000/svg">
            <defs>
                
        <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
        </marker>
            </defs>
            <rect x="50" y="50" width="105.0" height="500" fill="#f8f8f8" opacity="0.5"/><text x="102.5" y="580" text-anchor="middle" font-size="12" fill="#666">Genesis</text><rect x="155.0" y="50" width="244.99999999999997" height="500" fill="#f0f0f0" opacity="0.5"/><text x="277.5" y="580" text-anchor="middle" font-size="12" fill="#666">Custom</text><rect x="295.0" y="50" width="210.0" height="500" fill="#e8e8e8" opacity="0.5"/><text x="400.0" y="580" text-anchor="middle" font-size="12" fill="#666">Product</text><rect x="505.0" y="50" width="244.99999999999997" height="500" fill="#e0e0e0" opacity="0.5"/><text x="627.5" y="580" text-anchor="middle" font-size="12" fill="#666">Commodity</text>
        <line x1="50" y1="550" 
              x2="750" y2="550" 
              stroke="#333" stroke-width="2"/>
        <text x="400.0" y="595" 
              text-anchor="middle" font-size="14" font-weight="bold">
            Evolution →
        </text>
        <line x1="50" y1="50" 
              x2="50" y2="550" 
              stroke="#333" stroke-width="2"/>
        <text x="15" y="300.0" 
              text-anchor="middle" font-size="14" font-weight="bold" 
              transform="rotate(-90 15 300.0)">
            Value Chain →
        </text>
        <text x="45" y="45" 
              text-anchor="end" font-size="12" fill="#666">Visible</text>
        <text x="45" y="565" 
              text-anchor="end" font-size="12" fill="#666">Invisible</text>
        <line x1="540.0" y1="75.00000000000003" 
              x2="400.0" y2="200.00000000000003" 
              stroke="#666" stroke-width="1" stroke-dasharray="2,2" 
              marker-end="url(#arrowhead)"/>
        <line x1="400.0" y1="200.00000000000003" 
              x2="470.0" y2="300.0" 
              stroke="#666" stroke-width="1" stroke-dasharray="2,2" 
              marker-end="url(#arrowhead)"/>
        <line x1="470.0" y1="300.0" 
              x2="610.0" y2="400.0" 
              stroke="#666" stroke-width="1" stroke-dasharray="2,2" 
              marker-end="url(#arrowhead)"/>
        <line x1="610.0" y1="400.0" 
              x2="680.0" y2="500.0" 
              stroke="#666" stroke-width="1" stroke-dasharray="2,2" 
              marker-end="url(#arrowhead)"/>
        <g class="component">
            <circle cx="540.0" cy="75.00000000000003" r="8" fill="#e74c3c" 
                    stroke="#fff" stroke-width="2"/>
            <text x="540.0" y="63.00000000000003" text-anchor="middle" 
                  font-size="11" fill="#333">User Interface</text>
        </g>
        <g class="component">
            <circle cx="400.0" cy="200.00000000000003" r="8" fill="#f39c12" 
                    stroke="#fff" stroke-width="2"/>
            <text x="400.0" y="188.00000000000003" text-anchor="middle" 
                  font-size="11" fill="#333">Business Logic</text>
        </g>
        <g class="component">
            <circle cx="470.0" cy="300.0" r="8" fill="#27ae60" 
                    stroke="#fff" stroke-width="2"/>
            <text x="470.0" y="288.0" text-anchor="middle" 
                  font-size="11" fill="#333">Data Processing</text>
        </g>
        <g class="component">
            <circle cx="610.0" cy="400.0" r="8" fill="#95a5a6" 
                    stroke="#fff" stroke-width="2"/>
            <text x="610.0" y="388.0" text-anchor="middle" 
                  font-size="11" fill="#333">Database</text>
        </g>
        <g class="component">
            <circle cx="680.0" cy="500.0" r="8" fill="#95a5a6" 
                    stroke="#fff" stroke-width="2"/>
            <text x="680.0" y="488.0" text-anchor="middle" 
                  font-size="11" fill="#333">Cloud Infrastructure</text>
        </g>
        </svg>
        <div class="controls">
            <button onclick="exportSVG()">Export SVG</button>
            <button onclick="exportPNG()">Export PNG</button>
            <button onclick="toggleGrid()">Toggle Grid</button>
        </div>
    </div>
    
    <script>
        function exportSVG() {
            const svg = document.querySelector('svg');
            const svgData = new XMLSerializer().serializeToString(svg);
            const blob = new Blob([svgData], {type: 'image/svg+xml'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'wardley-map.svg';
            a.click();
        }
        
        function exportPNG() {
            const svg = document.querySelector('svg');
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const img = new Image();
            
            canvas.width = svg.getAttribute('width');
            canvas.height = svg.getAttribute('height');
            
            const svgData = new XMLSerializer().serializeToString(svg);
            const blob = new Blob([svgData], {type: 'image/svg+xml'});
            const url = URL.createObjectURL(blob);
            
            img.onload = function() {
                ctx.drawImage(img, 0, 0);
                canvas.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'wardley-map.png';
                    a.click();
                });
            };
            img.src = url;
        }
        
        function toggleGrid() {
            // Implementation for grid toggle
            console.log('Grid toggle not yet implemented');
        }
    </script>
</body>
</html>