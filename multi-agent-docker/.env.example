# ============================================================================
# Turbo Flow Unified - Environment Configuration
# ============================================================================
#
# SETUP: Copy this file to .env and fill in your API keys
#   cp .env.example .env
#   nano .env  # or vim, code, etc.
#
# ============================================================================

# ============================================================================
# API Keys (At least Anthropic recommended)
# ============================================================================

# Anthropic Claude (Primary - required for Claude Code CLI)
# Get your key: https://console.anthropic.com/
# This is used by Claude Code CLI for direct Anthropic API access
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# Z.AI Service Configuration (optional - for cost savings)
# If you want to use Z.AI's endpoint instead of direct Anthropic:
# Set ZAI_ANTHROPIC_API_KEY to your Anthropic key
# Z.AI service will use the api.z.ai endpoint automatically
ZAI_ANTHROPIC_API_KEY=your-zai-anthropic-api-key-here
ZAI_BASE_URL=https://api.z.ai/api/anthropic

# Google Gemini (for gemini-user)
# Get your key: https://aistudio.google.com/app/apikey
GOOGLE_GEMINI_API_KEY=your-gemini-api-key-here

# OpenAI (for openai-user)
# Get your key: https://platform.openai.com/api-keys
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_ORG_ID=your-openai-org-id-here

# GitHub Token (optional - for GitHub integration)
# Get your token: https://github.com/settings/tokens
GITHUB_TOKEN=your-github-token-here

# Context7 (optional - for documentation lookup)
CONTEXT7_API_KEY=your-context7-api-key-here

# Brave Search (optional - for web search)
BRAVE_API_KEY=your-brave-api-key-here

# ============================================================================
# Z.AI Service Configuration
# ============================================================================

CLAUDE_WORKER_POOL_SIZE=4
CLAUDE_MAX_QUEUE_SIZE=50
# Z.AI API Key for web-summary semantic topic matching
ZAI_API_KEY=your-zai-api-key-here

# ============================================================================
# Management API Configuration
# ============================================================================

MANAGEMENT_API_KEY=generate-a-secure-random-key-here
MANAGEMENT_API_PORT=9090
MANAGEMENT_API_HOST=0.0.0.0

# ============================================================================
# GPU Configuration
# ============================================================================

GPU_ACCELERATION=true
CUDA_VISIBLE_DEVICES=0,1,2

# ============================================================================
# System Configuration
# ============================================================================

LOG_LEVEL=info
NODE_ENV=production

# ============================================================================
# Service Toggles (all enabled by default)
# ============================================================================

ENABLE_VNC=true
ENABLE_CODE_SERVER=true
ENABLE_SSH=true
ENABLE_MANAGEMENT_API=true
ENABLE_ZAI_SERVICE=true
ENABLE_GEMINI_FLOW=true
ENABLE_DESKTOP=true

# ============================================================================
# RuVector PostgreSQL Memory (Unified Agent Memory)
# ============================================================================
#
# Claude Flow V3 uses centralized PostgreSQL for unified agent memory.
# These settings connect to the external ruvector-postgres container.
# If external database is unavailable, falls back to local PostgreSQL.

RUVECTOR_PG_HOST=ruvector-postgres
RUVECTOR_PG_PORT=5432
RUVECTOR_PG_USER=ruvector
RUVECTOR_PG_PASSWORD=ruvector_secure_pass
RUVECTOR_PG_DATABASE=ruvector
RUVECTOR_USE_EXTERNAL=true

# ============================================================================
# External Directory Mounts (Multiple Projects Supported)
# ============================================================================
#
# Mount external project directories to /home/devuser/workspace/project[N]
# Naming Convention:
#   PROJECT_DIR   -> /home/devuser/workspace/project
#   PROJECT_DIR_2 -> /home/devuser/workspace/project2
#   ... up to PROJECT_DIR_10

# Primary project
PROJECT_DIR=/path/to/your/project

# Additional projects
PROJECT_DIR_2=/path/to/another/project
# PROJECT_DIR_3=
# PROJECT_DIR_4=
# PROJECT_DIR_5=

# Host Claude config directory (mounted read-write for single source of truth)
HOST_CLAUDE_DIR=${HOME}/.claude

# ============================================================================
# Optional/Advanced Configuration
# ============================================================================

# OpenRouter (Access to 100+ models with cost savings)
# Get your key: https://openrouter.ai/keys
OPENROUTER_API_KEY=your-openrouter-api-key-here

# E2B Sandboxes (for cloud code execution)
E2B_API_KEY=your-e2b-api-key-here

# Deepseek api key
DEEPSEEK_API_KEY=your-deepseek-api-key-here
DEEPSEEK_BASE_URL=https://api.deepseek.com


# Google Cloud Project (for advanced Gemini-Flow features)
GOOGLE_CLOUD_PROJECT=your-gcp-project-id
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# Provider Configuration
PRIMARY_PROVIDER=claude
FALLBACK_CHAIN=gemini,openai,claude

# Router Configuration
ROUTER_MODE=performance
AUTO_OPTIMIZE=true
DAILY_BUDGET=10.0
WEEKLY_BUDGET=50.0
MONTHLY_BUDGET=200.0

# Gemini-Flow Configuration
GEMINI_FLOW_ENABLED=true
GEMINI_FLOW_PROTOCOLS=a2a,mcp
GEMINI_FLOW_TOPOLOGY=hierarchical
GEMINI_FLOW_MAX_AGENTS=66

# Agent Configuration
MCP_AUTO_START=true
ENABLE_MEMORY=true
MEMORY_TTL=86400
ENABLE_STREAMING=true
ENABLE_LOGGING=true

# Advanced Feature Flags
ENABLE_OPENROUTER=false
ENABLE_XINFERENCE=false
ENABLE_ONNX=false

# System Configuration
TZ=UTC

# ============================================================================
# Multi-User Architecture
# ============================================================================
#
# devuser (1000:1000)      - Primary Claude Code development
# gemini-user (1001:1001)  - Google Gemini CLI & gemini-flow
# openai-user (1002:1002)  - OpenAI Codex
# zai-user (1003:1003)     - Z.AI service (internal only)
#
# ============================================================================
# Network Configuration
# ============================================================================
#
# Joins docker_ragflow network
# Z.AI accessible only within ragflow network (port 9600)
# External ports:
#   - 2222 -> 22 (SSH)
#   - 5901 (VNC)
#   - 8080 (code-server)
#   - 9090 (Management API)
#
# ============================================================================
# Default Credentials (CHANGE IN PRODUCTION)
# ============================================================================
#
# SSH/VNC password: turboflow
# VNC password file: /home/devuser/.vnc/passwd
# Management API: X-API-Key header with MANAGEMENT_API_KEY value
#
# ============================================================================
# Available Features
# ============================================================================
#
# Skills (6):
#   - web-summary, blender, qgis, kicad, imagemagick, pbr-rendering
#   Located: /home/devuser/.claude/skills/
#
# Agents (610+):
#   - doc-planner.md, microtask-breakdown.md, etc.
#   Located: /home/devuser/agents/
#
# tmux Session:
#   - Name: workspace
#   - 8 windows: Claude-Main, Claude-Agent, Services, Development,
#                Logs, System, VNC-Status, SSH-Shell
#   - Attach: tmux attach-session -t workspace
#
# ============================================================================
# Volume Mounts
# ============================================================================
#
# Docker named volumes (persistent):
#   - workspace       -> /home/devuser/workspace
#   - agents          -> /home/devuser/agents
#   - claude-config   -> /home/devuser/.claude
#   - gemini-workspace -> /home/gemini-user/workspace
#   - openai-workspace -> /home/openai-user/workspace
#   - model-cache     -> /home/devuser/models
#   - logs            -> /var/log
#
# Host bind mounts:
#   - ${HOST_CLAUDE_DIR}  -> /home/devuser/.claude (read-write)
#   - ${PROJECT_DIR}      -> /home/devuser/workspace/project (read-write)
#   - ${PROJECT_DIR_2}    -> /home/devuser/workspace/project2 (read-write)
#   - ${PROJECT_DIR_N}    -> /home/devuser/workspace/projectN (up to 10)
#   - /tmp/.X11-unix      -> /tmp/.X11-unix (X11 socket)
#
# ============================================================================

# Perplexity AI API
PERPLEXITY_API_KEY=your-perplexity-api-key-here

# ============================================================================
# Agent Delegation (NIP-26) - Solid Pod Access
# ============================================================================
# Agents use delegated Nostr keys to access user pods in JSS.
# In production, these are generated per-session. For dev, use static keys.

# JSS (JavaScript Solid Server) URL
JSS_URL=http://jss:3030

# Development agent keypair (hex format, 64 chars)
# Generate with: openssl rand -hex 32
# WARNING: In production, these are ephemeral per-session, not static!
AGENT_SECRET_KEY=generate-with-openssl-rand-hex-32
AGENT_PUBLIC_KEY=derived-from-secret-key

# Default delegation validity (hours)
AGENT_DELEGATION_HOURS=24

# Dev user Nostr identity (for testing pod access)
# This would normally come from NIP-07 browser extension
DEV_USER_NPUB=your-dev-user-npub
DEV_USER_HEX=your-dev-user-hex
