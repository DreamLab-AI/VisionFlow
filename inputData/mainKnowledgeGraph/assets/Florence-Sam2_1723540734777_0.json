{"last_node_id":17,"last_link_id":13,"nodes":[{"id":4,"type":"VHS_LoadVideo","pos":[74,152],"size":[235.1999969482422,377.04999828338623],"flags":{},"order":0,"mode":0,"inputs":[{"name":"batch_manager","type":"VHS_BatchManager","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2],"shape":3,"slot_index":0},{"name":"frame_count","type":"INT","links":null,"shape":3},{"name":"audio","type":"VHS_AUDIO","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_LoadVideo"},"widgets_values":{"video":"Push.mp4","force_rate":0,"force_size":"Disabled","custom_width":512,"custom_height":512,"frame_load_cap":0,"skip_first_frames":50,"select_every_nth":1,"choose video to upload":"image","videopreview":{"hidden":false,"paused":true,"params":{"frame_load_cap":0,"skip_first_frames":50,"force_rate":0,"filename":"Push.mp4","type":"input","format":"video/mp4","select_every_nth":1}}}},{"id":5,"type":"Anything Everywhere","pos":[360,183],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":5,"mode":0,"inputs":[{"name":"IMAGE","type":"*","link":2,"color_on":"#64B5F6"}],"properties":{"Node name for S&R":"Anything Everywhere","group_restricted":0,"color_restricted":0},"widgets_values":["Tensor shape torch.Size([279, 720, 1280, 3])"]},{"id":8,"type":"DownloadAndLoadFlorence2Model","pos":[356,416],"size":{"0":315,"1":106},"flags":{},"order":1,"mode":0,"outputs":[{"name":"florence2_model","type":"FL2MODEL","links":[4],"shape":3}],"properties":{"Node name for S&R":"DownloadAndLoadFlorence2Model"},"widgets_values":["microsoft/Florence-2-base","fp16","sdpa"]},{"id":6,"type":"Florence2Run","pos":[750,252],"size":{"0":400,"1":304},"flags":{},"order":6,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3,"slot_index":0},{"name":"florence2_model","type":"FL2MODEL","link":4,"slot_index":1}],"outputs":[{"name":"image","type":"IMAGE","links":[5],"shape":3,"slot_index":0},{"name":"mask","type":"MASK","links":null,"shape":3},{"name":"caption","type":"STRING","links":null,"shape":3},{"name":"data","type":"JSON","links":[6],"shape":3,"slot_index":3}],"properties":{"Node name for S&R":"Florence2Run"},"widgets_values":["woman","caption_to_phrase_grounding",true,false,1024,3,true,""]},{"id":7,"type":"GetImageRangeFromBatch","pos":[356,255],"size":{"0":315,"1":102},"flags":{},"order":2,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":null},{"name":"masks","type":"MASK","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3],"shape":3},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"GetImageRangeFromBatch"},"widgets_values":[0,1]},{"id":10,"type":"PreviewImage","pos":[1233,-3],"size":[354.42258684884405,224.83343212255028],"flags":{},"order":7,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":5}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":11,"type":"Florence2toCoordinates","pos":[1238,312],"size":{"0":315,"1":78},"flags":{},"order":8,"mode":0,"inputs":[{"name":"data","type":"JSON","link":6}],"outputs":[{"name":"center_coordinates","type":"STRING","links":[7],"shape":3,"slot_index":0},{"name":"bboxes","type":"BBOX","links":null,"shape":3}],"properties":{"Node name for S&R":"Florence2toCoordinates"},"widgets_values":["0"]},{"id":13,"type":"DownloadAndLoadSAM2Model","pos":[1643,86],"size":{"0":315,"1":130},"flags":{},"order":3,"mode":0,"outputs":[{"name":"sam2_model","type":"SAM2MODEL","links":[8],"shape":3}],"properties":{"Node name for S&R":"DownloadAndLoadSAM2Model"},"widgets_values":["sam2_hiera_base_plus.safetensors","video","cuda","bf16"]},{"id":12,"type":"Sam2Segmentation","pos":[2026,252],"size":[315,170],"flags":{},"order":9,"mode":0,"inputs":[{"name":"sam2_model","type":"SAM2MODEL","link":8,"slot_index":0},{"name":"image","type":"IMAGE","link":null},{"name":"bboxes","type":"BBOX","link":null},{"name":"coordinates_positive","type":"STRING","link":7,"widget":{"name":"coordinates_positive"}},{"name":"coordinates_negative","type":"STRING","link":null,"widget":{"name":"coordinates_negative"}}],"outputs":[{"name":"mask","type":"MASK","links":[9,10],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Sam2Segmentation"},"widgets_values":[true,"","",false]},{"id":14,"type":"ImageCompositeMasked","pos":[2729,211],"size":{"0":315,"1":146},"flags":{},"order":11,"mode":0,"inputs":[{"name":"destination","type":"IMAGE","link":null},{"name":"source","type":"IMAGE","link":11},{"name":"mask","type":"MASK","link":9}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[12],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageCompositeMasked"},"widgets_values":[0,0,false]},{"id":16,"type":"VHS_VideoCombine","pos":[3113,210],"size":[474.3266259723796,559.5587158203125],"flags":{},"order":13,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":12},{"name":"audio","type":"VHS_AUDIO","link":null},{"name":"batch_manager","type":"VHS_BatchManager","link":null}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":12,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00145.mp4","subfolder":"","type":"output","format":"video/h264-mp4"}}}},{"id":17,"type":"VHS_VideoCombine","pos":[3631,129],"size":[437.4119547687669,538.7942504882812],"flags":{},"order":12,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":13},{"name":"audio","type":"VHS_AUDIO","link":null},{"name":"batch_manager","type":"VHS_BatchManager","link":null}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":12,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00144.mp4","subfolder":"","type":"output","format":"video/h264-mp4"}}}},{"id":15,"type":"MaskToImage","pos":[2431,130],"size":{"0":210,"1":26},"flags":{},"order":10,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":10}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[11,13],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":9,"type":"Note","pos":[361,602],"size":[307.0667680485167,121.54766480024432],"flags":{},"order":4,"mode":0,"properties":{"text":""},"widgets_values":["The necessary files will be automatically downloaded the first time you run the workflow. If for any reason they don't download, you'll need to manually download them and place them in the LLM folder.\nFlorence-2 base: a general-purpose model suitable for a wide range of tasks."],"color":"#432","bgcolor":"#653"}],"links":[[2,4,0,5,0,"IMAGE"],[3,7,0,6,0,"IMAGE"],[4,8,0,6,1,"FL2MODEL"],[5,6,0,10,0,"IMAGE"],[6,6,3,11,0,"JSON"],[7,11,0,12,3,"STRING"],[8,13,0,12,0,"SAM2MODEL"],[9,12,0,14,2,"MASK"],[10,12,0,15,0,"MASK"],[11,15,0,14,1,"IMAGE"],[12,14,0,16,0,"IMAGE"],[13,15,0,17,0,"IMAGE"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.5644739300537778,"offset":[-2.2700493448223558,283.8478919120699]}},"version":0.4}