# Multi-Agent Docker Environment Configuration Example
# Copy this file to .env and fill in your actual values
# NEVER commit the actual .env file to version control

# ===========================================
# GPU / CUDA Configuration (Optional)
# ===========================================
# NO_GPU_COMPUTE=true               # Uncomment to disable GPU features entirely

# NVIDIA_VISIBLE_DEVICES: Controls which GPU(s) are exposed to the Docker container
# - To use a specific GPU, provide its UUID (find with `nvidia-smi -L`)
# - Use "all" to expose all GPUs
# - If you expose only ONE GPU, its index inside the container will be 0
NVIDIA_VISIBLE_DEVICES=GPU-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# CUDA_DEVICE: GPU index to use inside the container
# - If NVIDIA_VISIBLE_DEVICES exposes only one GPU, set to 0
# - If NVIDIA_VISIBLE_DEVICES is "all", set to desired physical GPU index
# CUDA_DEVICE=0

# CUDA_ARCH: CUDA compute capability of target GPU
# - 86 for RTX 30-series (Ampere) and RTX A6000
# - 89 for RTX 40-series (Ada)
CUDA_ARCH=86

# ===========================================
# GitHub Configuration
# ===========================================
# SECURITY WARNING: Use GitHub App authentication or fine-grained tokens
# with minimal required permissions
GITHUB_OWNER=your-github-username
GITHUB_REPO=your-repo-name
GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
GITHUB_BASE_PATH=path/to/knowledge/base

# ===========================================
# RAGFlow Configuration
# ===========================================
RAGFLOW_API_KEY=ragflow-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
RAGFLOW_API_BASE_URL=http://ragflow-server:9380
RAGFLOW_AGENT_ID=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ===========================================
# Perplexity API Configuration
# ===========================================
PERPLEXITY_API_KEY=pplx-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
PERPLEXITY_MODEL=llama-3.1-sonar-small-128k-online
PERPLEXITY_MAX_TOKENS=4096
PERPLEXITY_TEMPERATURE=0.5
PERPLEXITY_TOP_P=0.9
PERPLEXITY_PRESENCE_PENALTY=0.0
PERPLEXITY_FREQUENCY_PENALTY=1.0
PERPLEXITY_API_URL=https://api.perplexity.ai/chat/completions

# ===========================================
# OpenAI Configuration
# ===========================================
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
OPENAI_BASE_URL=wss://api.openai.com/v1/realtime
OPENAI_TIMEOUT=30
OPENAI_RATE_LIMIT=100

# ===========================================
# API Rate Limiting Configuration
# ===========================================
MAX_CONCURRENT_REQUESTS=2
MAX_RETRIES=3
RETRY_DELAY=5
API_CLIENT_TIMEOUT=30  # Timeout in seconds

# ===========================================
# Environment Configuration
# ===========================================
# Data Paths
DATA_ROOT=/app/data
MARKDOWN_DIR=/app/data/markdown
METADATA_DIR=/app/data/metadata

# Server Configuration
BIND_ADDRESS=0.0.0.0
DEBUG_ENABLED=false
DEBUG_MODE=false
RUST_LOG=error
SETTINGS_FILE_PATH=/app/settings.yaml

# ===========================================
# Cloudflare Tunnel Configuration
# ===========================================
CLOUDFLARE_TUNNEL_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TUNNEL_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# Network Configuration
DOMAIN=yourdomain.com

# ===========================================
# Authentication Configuration
# ===========================================
# Base access control - comma-separated list of Nostr public keys
APPROVED_PUBKEYS=your_nostr_pubkey_here

# Role-based access control
POWER_USER_PUBKEYS=power_user_pubkey1,power_user_pubkey2
SETTINGS_SYNC_ENABLED_PUBKEYS=sync_pubkey1,sync_pubkey2

# Feature-specific access control
PERPLEXITY_ENABLED_PUBKEYS=perplexity_user_pubkey1,perplexity_user_pubkey2
OPENAI_ENABLED_PUBKEYS=openai_user_pubkey1,openai_user_pubkey2
RAGFLOW_ENABLED_PUBKEYS=ragflow_user_pubkey1,ragflow_user_pubkey2

# ===========================================
# Docker Configuration
# ===========================================
DOCKER_REGISTRY_MIRROR=registry-1.docker.io

# External directory for mounted files
EXTERNAL_DIR=/path/to/your/external/files

# Host user and group IDs for file permissions
HOST_UID=1000
HOST_GID=1000

# Resource limits (leave empty for auto-detection)
DOCKER_CPUS=
DOCKER_MEMORY=

# ===========================================
# MCP (Model Context Protocol) Configuration
# ===========================================
# Claude Flow MCP Configuration (TCP-based)
CLAUDE_FLOW_HOST=multi-agent-container
MCP_TCP_PORT=9500
MCP_TRANSPORT=tcp
MCP_RECONNECT_ATTEMPTS=3
MCP_RECONNECT_DELAY=1000
MCP_CONNECTION_TIMEOUT=30000
MCP_LOG_LEVEL=info

# External application ports
BLENDER_PORT=9876
QGIS_PORT=9877

# Bots Orchestrator WebSocket
BOTS_ORCHESTRATOR_URL=ws://multi-agent-container:3002/ws

# ===========================================
# Security Configuration
# ===========================================
# JWT Configuration for API Authentication
JWT_SECRET=generate-a-strong-random-secret-here
JWT_EXPIRATION=3600  # Token expiration in seconds

# Session Configuration
SESSION_SECRET=generate-another-strong-random-secret-here
SESSION_TIMEOUT=1800  # Session timeout in seconds

# CORS Configuration
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# Rate Limiting
RATE_LIMIT_WINDOW_MS=60000  # 1 minute
RATE_LIMIT_MAX_REQUESTS=100  # Max requests per window

# ===========================================
# WebSocket Security Configuration
# ===========================================
WS_AUTH_ENABLED=true
WS_AUTH_TOKEN=generate-websocket-auth-token-here
WS_MAX_CONNECTIONS=100
WS_CONNECTION_TIMEOUT=300000  # 5 minutes

# ===========================================
# Input Validation Configuration
# ===========================================
MAX_REQUEST_SIZE=10485760  # 10MB
MAX_FIELD_SIZE=1048576     # 1MB
ALLOWED_FILE_TYPES=.jpg,.png,.pdf,.txt,.md
SANITIZE_HTML=true

# ===========================================
# Monitoring and Logging
# ===========================================
LOG_LEVEL=info
LOG_FORMAT=json
ENABLE_ACCESS_LOGS=true
ENABLE_ERROR_LOGS=true
LOG_RETENTION_DAYS=30

# Metrics Collection
ENABLE_METRICS=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Health Check
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PORT=9501
HEALTH_CHECK_PATH=/health